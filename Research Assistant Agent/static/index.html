<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Research Assistant</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white min-h-screen flex items-center justify-center">

  <div class="w-full max-w-2xl p-6">
    <div class="bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl p-6 border border-white/20">
      
      <h1 class="text-3xl font-bold text-center mb-6 text-white">ü§ñ AI Research Assistant</h1>
      
      <textarea 
        id="question"
        class="w-full h-32 p-4 rounded-xl bg-white/5 text-white border border-white/20 focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none"
        placeholder="Type your question here..."
      ></textarea>

      <button 
        onclick="askAI()"
        class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl font-semibold transition-all"
      >
        Ask AI
      </button>

      <div 
        id="response"
        class="mt-6 p-4 rounded-xl bg-white/5 border border-white/20 min-h-[100px] text-gray-100 whitespace-pre-wrap transition-all"
      >
        üí¨ Type a question and hit "Ask AI"
      </div>
    </div>
  </div>

  <script>
  async function askAI() {
    const question = document.getElementById("question").value;
    const responseDiv = document.getElementById("response");

    if (!question.trim()) {
      responseDiv.innerHTML = "‚ö†Ô∏è Please enter a question first!";
      return;
    }

    responseDiv.innerHTML = `
      <div class="flex justify-center items-center">
        <svg class="animate-spin h-6 w-6 text-blue-400 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
        </svg>
        <span class="text-blue-300">Thinking...</span>
      </div>
    `;

    try {
      const res = await fetch("/ask", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question }),
      });

      const data = await res.json();
      if (data.error) {
        responseDiv.innerHTML = `<span class="text-red-400">‚ö†Ô∏è ${data.error}</span>`;
      } else {
        responseDiv.innerHTML = data.answer;
      }
    } catch (err) {
      responseDiv.innerHTML = `<span class="text-red-400">Network Error: ${err.message}</span>`;
    }
  }
</script>
</body>
</html>